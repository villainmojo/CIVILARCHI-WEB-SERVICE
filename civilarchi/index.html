<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CIVILARCHI · 토목·건축 엔지니어 웹</title>
  <meta name="description" content="CIVILARCHI: 토목·건축 엔지니어를 위한 간단한 웹 도구/노트." />
  <link rel="icon" href="/favicon.svg" />
  <link rel="stylesheet" href="/civilarchi/assets/style.css?v=20260205_0339" />
</head>
<body>
  <header class="top">
    <div class="container top-inner">
      <div class="brand">
        <div class="logo">CA</div>
        <div>
          <div class="name">CIVILARCHI</div>
          <div class="sub">토목·건축 엔지니어용 웹 서비스 (static)</div>
        </div>
      </div>
      <nav class="nav">
        <a href="/">메인</a>
        <a href="/blog/">블로그</a>
        <a class="active" href="/civilarchi/">CIVILARCHI</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="app">
      <aside class="sidebar">
        <div class="sb-title">기능</div>
        <a class="sb-item" href="#hbeam" data-view="hbeam">STEEL MEMBER 하중 계산기</a>
        <a class="sb-item" href="#draft" data-view="draft">STEEL STRUCTURE DRAFT</a>

        <div class="sb-title">시스템</div>
        <div class="sb-box">
          <div class="row">
            <div class="label">상태</div>
            <div id="status" class="badge ok">로딩 중…</div>
          </div>
          <div class="row">
            <div class="label">build</div>
            <div id="build" class="mono small"></div>
          </div>
        </div>
      </aside>

      <section class="content">
        <!-- HOME VIEW -->
        <section class="view" data-view="home">
          <section class="home-hero">
            <div class="home-hero-bg"></div>
            <div class="home-hero-inner">
              <div class="home-title">
                <div class="home-kicker">CIVIL · ARCHI</div>
                <h1>엔지니어를 위한 빠른 계산 · 표준 · 체크</h1>
                <p class="muted">
                  토목/건축 실무에서 바로 꺼내 쓰는 작은 도구들을 모읍니다.
                </p>
              </div>

              <div class="quick">
                <div class="quick-title">빠른 실행</div>
                <div class="quick-grid">
                  <button class="quick-card" data-goto="hbeam">
                    <div class="qc-top">
                      <div class="qc-icon">Σ</div>
                      <div class="qc-name">STEEL MEMBER 하중 계산기</div>
                    </div>
                    <div class="qc-desc">KS/JIS · 형강/강관/앵글 등 · kg/m → kg, ton</div>
                  </button>

                  <button class="quick-card" data-goto="draft">
                    <div class="qc-top">
                      <div class="qc-icon">3D</div>
                      <div class="qc-name">STEEL STRUCTURE DRAFT</div>
                    </div>
                    <div class="qc-desc">그리드/레벨 기반 3D 배치 + 물량 합계</div>
                  </button>

                  <button class="quick-card" disabled>
                    <div class="qc-top">
                      <div class="qc-icon">↗</div>
                      <div class="qc-name">(준비중) 단위 변환</div>
                    </div>
                    <div class="qc-desc">길이/면적/압력/힘</div>
                  </button>

                  <button class="quick-card" disabled>
                    <div class="qc-top">
                      <div class="qc-icon">📄</div>
                      <div class="qc-name">(준비중) 규격/링크</div>
                    </div>
                    <div class="qc-desc">표준/참고자료 링크 모음</div>
                  </button>
                </div>

                <div class="home-meta">
                  <div class="meta-item"><span class="dot ok"></span> 상태는 색으로 전달</div>
                  <div class="meta-item"><span class="dot neutral"></span> 채도는 낮게</div>
                  <div class="meta-item"><span class="dot steel"></span> 버튼/선택은 Steel Blue</div>
                </div>
              </div>
            </div>
          </section>
        </section>

        <!-- HBEAM VIEW -->
        <section class="view" data-view="hbeam" hidden>
          <div class="pagehead">
            <div>
              <h1>STEEL MEMBER 하중 계산기</h1>
              <p class="muted">단위중량(kg/m) × 길이(m) = 하중(kg, ton) · 합산 가능</p>
            </div>
            <div class="page-actions">
              <button class="btn" data-goto="home">홈으로</button>
            </div>
          </div>

          <div class="cards tool-cards">
            <article class="card">
              <h2>입력</h2>
              <div class="form">
                <label>
                  <span>국가/규격</span>
                  <select id="hbStandard"></select>
                </label>

                <label>
                  <span>철골 종류</span>
                  <select id="hbShape"></select>
                </label>

                <label>
                  <span>단면(사이즈)</span>
                  <select id="hbSize"></select>
                </label>

                <label>
                  <span>길이 (m)</span>
                  <input id="hbLength" type="number" inputmode="decimal" min="0" step="0.1" value="6" />
                </label>

                <div class="row-inline">
                  <label class="inline">
                    <input id="hbUseCustom" type="checkbox" />
                    <span>사용자 직접 입력(kg/m)</span>
                  </label>
                </div>

                <label id="hbCustomWrap" hidden>
                  <span>단위중량 (kg/m)</span>
                  <input id="hbCustomKgm" type="number" inputmode="decimal" min="0" step="0.001" placeholder="예: 94.0" />
                  <div class="hint">표/규격 값이 없을 때 임시로 사용합니다.</div>
                </label>

                <div class="hint">
                  주의: 현재는 계산 UI/구조를 먼저 구축했습니다. 규격 테이블(kg/m)은 국가별로 정확한 표를 받아서 확장하는 방식이 안전합니다.
                </div>
              </div>
            </article>

            <article class="card">
              <h2>결과</h2>
              <div class="result">
                <div class="kv">
                  <div class="k">단위중량</div>
                  <div class="v"><span id="hbKgm" class="mono">-</span> <span class="muted">kg/m</span></div>
                </div>
                <div class="kv">
                  <div class="k">총 중량</div>
                  <div class="v"><span id="hbTotal" class="mono">-</span> <span class="muted">kg</span></div>
                </div>
                <div class="kv">
                  <div class="k">총 중량</div>
                  <div class="v"><span id="hbTotalTon" class="mono">-</span> <span class="muted">ton</span></div>
                </div>

                <div id="hbMsg" class="notice" hidden></div>
              </div>

              <div class="btns" style="margin-top:12px">
                <button class="btn" id="hbAdd">합산 추가</button>
                <button class="btn primary" id="hbCopy">결과 복사</button>
              </div>
            </article>
          </div>

          <section class="sum full" aria-label="합산" style="margin-top:14px">
            <div class="sum-head">
              <h3>합산</h3>
              <div class="sum-actions">
                <button class="mini-btn" id="sumCopy">엑셀로 복사</button>
              </div>
              <div class="sum-totals">
                <span class="badge ok"><span class="mono" id="sumKg">-</span>&nbsp;kg</span>
                <span class="badge"><span class="mono" id="sumTon">-</span>&nbsp;ton</span>
              </div>
            </div>

            <div class="sum-table-wrap">
              <table class="sum-table">
                <thead>
                  <tr>
                    <th>규격</th>
                    <th>종류</th>
                    <th>사이즈</th>
                    <th class="right">kg/m</th>
                    <th class="right">길이(m)</th>
                    <th class="right">kg</th>
                    <th class="right">ton</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="sumRows"></tbody>
              </table>
            </div>

            <div class="hint">합산 행의 길이를 수정하면 합계가 실시간으로 갱신됩니다. (엑셀로 복사는 표 형태로 붙여넣기 됩니다)</div>
          </section>
        </section>

        <!-- DRAFT VIEW -->
        <section class="view" data-view="draft" hidden>
          <div class="pagehead">
            <div>
              <h1>STEEL STRUCTURE DRAFT</h1>
              <p class="muted">mm 단위 · 그리드 교차점 기둥 + 레벨별 빔 자동 배치 · 3D로 확인</p>
            </div>
            <div class="page-actions">
              <button class="btn" data-goto="home">홈으로</button>
            </div>
          </div>

          <div class="draft-stack">
            <section class="draft-canvas-wrap">
              <div class="draft-canvas" id="drCanvas"></div>

              <div class="draft-ov collapsed" aria-label="선택 부재 변경" id="drOvPanel">
                <button class="ov-fab" id="drOvToggle" title="선택 부재 설정 열기/닫기">⚙</button>

                <div class="ov-body">
                  <div class="ov-head">
                    <div class="ov-title">선택 부재</div>
                    <div class="ov-head-actions">
                      <button class="mini-btn" id="drOvResetAll" title="전체 Override 초기화">전체 초기화</button>
                      <button class="mini-btn" id="drOvCollapse" title="접기">접기</button>
                    </div>
                  </div>
                  <div class="muted small" id="drOvInfo">3D에서 부재를 클릭하면 여기서 해당 부재만 프로파일을 변경할 수 있습니다. (Shift 클릭: 멀티 선택)</div>

                  <div class="form" style="margin-top:8px">
                    <label><span>부재종류</span><select id="drOvShape" disabled></select></label>
                    <label><span>프로파일</span><select id="drOvSize" disabled></select></label>
                  </div>
                  <div class="btns" style="margin-top:10px">
                    <button class="btn" id="drOvApply" disabled>선택 부재에 적용</button>
                    <button class="btn" id="drOvClear" disabled>선택 부재 초기화</button>
                  </div>

                  <div class="sb-title" style="margin-top:12px">Override 리스트</div>
                  <div class="sum-table-wrap">
                    <table class="sum-table" style="min-width: 520px">
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>분류</th>
                          <th>부재종류</th>
                          <th>프로파일</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody id="drOvList"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>

            <section class="draft-settings">
              <div class="cards draft-cards">
                <details class="card fold" open>
                  <summary>그리드</summary>
                  <div class="form" style="margin-top:10px">
                    <label><span>Grid X (가로 개수)</span><input id="drGridX" type="number" min="1" step="1" value="4" /></label>
                    <label><span>Grid Y (세로 개수)</span><input id="drGridY" type="number" min="1" step="1" value="3" /></label>
                    <label><span>X 기본 간격 (mm)</span><input id="drSpacingX" type="number" min="1" step="1" value="6000" /></label>
                    <label><span>Y 기본 간격 (mm)</span><input id="drSpacingY" type="number" min="1" step="1" value="6000" /></label>
                    <label><span>X 커스텀 간격들 (mm, 콤마)</span><input id="drSpansX" type="text" placeholder="예: 6000,6000,8000" /></label>
                    <label><span>Y 커스텀 간격들 (mm, 콤마)</span><input id="drSpansY" type="text" placeholder="예: 6000,6000" /></label>
                  </div>
                  <div class="hint">커스텀 간격이 있으면 Grid 개수는 간격 개수+1로 자동 적용됩니다.</div>
                </details>

                <details class="card fold" open>
                  <summary>레벨</summary>
                  <div class="form" style="margin-top:10px">
                    <div id="drLevels"></div>
                    <div class="btns">
                      <button class="btn" id="drAddLevel">레벨 추가</button>
                    </div>
                    <div class="hint">레벨은 “층간”이 아니라 “절대 높이(mm)” 기준입니다. (예: 4200, 8400)</div>
                  </div>
                </details>

                <details class="card fold" open>
                  <summary>프로파일</summary>
                  <div class="form" style="margin-top:10px">
                    <label><span>국가/규격 (전체)</span><select id="drStdAll"></select></label>
                  </div>

                  <div class="two" style="margin-top:10px">
                    <div>
                      <div class="sb-title" style="margin-top:0">기둥(공통)</div>
                      <div class="form">
                        <label><span>부재종류</span><select id="drColShape"></select></label>
                        <label><span>프로파일</span><select id="drColSize"></select></label>
                      </div>
                    </div>
                    <div>
                      <div class="sb-title" style="margin-top:0">보(공통)</div>
                      <div class="form">
                        <label><span>부재종류</span><select id="drBeamShape"></select></label>
                        <label><span>프로파일</span><select id="drBeamSize"></select></label>
                      </div>
                    </div>
                  </div>

                  <!-- Override UI moved to 3D overlay -->

                  <div class="hint" style="margin-top:10px">기본값: KR·KS / H / H 150x150… · 선택 부재 Override는 해당 부재에만 적용됩니다.</div>
                </details>
              </div>
            </section>

            <section class="draft-qty">
              <div class="card" style="margin-top:0">
                <h2>전체 물량</h2>

                <div class="sum-table-wrap">
                  <table class="sum-table">
                    <thead>
                      <tr>
                        <th>분류</th>
                        <th>부재종류</th>
                        <th class="right">길이 (m)</th>
                        <th class="right">갯수</th>
                        <th class="right">하중</th>
                      </tr>
                    </thead>
                    <tbody id="drQtyRows"></tbody>
                    <tfoot>
                      <tr>
                        <th colspan="2">합산</th>
                        <th class="right mono" id="drQtySumLen">-</th>
                        <th class="right mono" id="drQtySumCount">-</th>
                        <th class="right mono" id="drQtySumLoad">-</th>
                      </tr>
                    </tfoot>
                  </table>
                </div>

                <div class="btns" style="margin-top:12px">
                  <button class="btn" id="drCopy">엑셀로 복사</button>
                </div>
                <div class="hint">하중은 선택된 공통 프로파일(kg/m) × 길이(m)로 계산됩니다.</div>
              </div>
            </section>
          </div>
        </section>

        <footer class="footer">
          <div class="muted small">© SENGVIS · CIVILARCHI</div>
        </footer>
      </section>
    </div>
  </main>

  <script src="/civilarchi/assets/steel_data.js?v=20260205_0210"></script>
  <script src="/civilarchi/assets/app.js?v=20260205_0339"></script>
  <script type="module" data-civilarchi-draft="1" src="/civilarchi/assets/draft.js?v=20260205_0339"></script>
</body>
</html>
